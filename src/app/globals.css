:root {
  --bg: #fefdfb;
  --text: #451a03;
  --text-secondary: #78716c;
  --surface: #f7f3f0;
  --input: #faf8f5;
  --border: #e7e5e4;
  --primary: #a16207;
  --hover: #f5f5f4;
  color-scheme: light;
}

/* Dark mode via explicit attribute */
:root[data-theme="dark"] {
  --bg: #1c1917;
  --text: #fef7ed;
  --text-secondary: #d6d3d1;
  --surface: #292524;
  --input: #1c1917;
  --border: #57534e;
  --primary: #fbbf24;
  --hover: #44403c;
  color-scheme: dark;
}

/* 只有在没有明确设置主题时才使用系统偏好 */
@media (prefers-color-scheme: dark) {
  :root:not([data-theme="light"]):not([data-theme="dark"]) {
    --bg: #1c1917;
    --text: #fef7ed;
    --text-secondary: #d6d3d1;
    --surface: #292524;
    --input: #1c1917;
    --border: #57534e;
    --primary: #fbbf24;
    --hover: #44403c;
    color-scheme: dark;
  }
}

html, body {
  padding: 0;
  margin: 0;
  background: var(--bg);
  color: var(--text);
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Noto Sans,
    Ubuntu, Cantarell, Helvetica Neue, Arial, "Apple Color Emoji", "Segoe UI Emoji";
}

* { box-sizing: border-box; }

/* Layout helpers */
.container { width: min(1200px, 94vw); margin: 0 auto; padding: 18px 8px 32px; }

/* CSS加载完成标记 */
html::after {
  content: '';
  display: none;
}

/* 防止FOUC的过渡效果 */
body {
  opacity: 1;
  transition: opacity 0.1s ease-in-out;
}

/* 确保关键元素立即可见 */
.navbar, .container, main {
  visibility: visible;
}

/* Dialog样式备用 - 防止styled-jsx失效 */
.modal { 
  position: fixed !important; 
  inset: 0 !important; 
  background: rgba(0,0,0,.45) !important; 
  display: grid !important; 
  place-items: center !important;
  z-index: 1000 !important;
}

.dialog { 
  width: min(520px, 92vw) !important; 
  background: var(--surface) !important; 
  border-radius: 12px !important; 
  padding: 16px !important; 
  display: grid !important; 
  gap: 12px !important;
  box-shadow: 0 10px 25px rgba(0,0,0,0.2) !important;
}

.dlg-title { 
  margin: 4px 0 8px !important; 
  font-size: 18px !important; 
  font-weight: 600 !important;
}

.dlg-actions { 
  display: grid !important; 
  grid-auto-flow: column !important; 
  gap: 10px !important; 
  justify-content: end !important; 
}

/* 优化字体加载 */
@font-face {
  font-family: 'system-ui';
  src: local('system-ui'), local('-apple-system'), local('BlinkMacSystemFont');
  font-display: swap;
}
